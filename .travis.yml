language: r
pandoc_version: 2.3.1

before_install:
  - sudo apt-get update
  - sudo apt-get install python3


script:
  - Rscript -e 'devtools::install_github("RLesur/klippy")'
  - Rscript -e 'devtools::install_github("juba/rmdformats")'
  - Rscript -e 'bookdown::render_book("index.Rmd")'
  - mv out.html _bookdown_files/index.html
  - mv addons _bookdown_files

cache:
  packages: yes
  directories:

deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GH_TOKEN  # Set in travis-ci.org dashboard, marked secure
  keep-history: true
  local-dir: _bookdown_files # Book output directory
  on:
    branch: master
